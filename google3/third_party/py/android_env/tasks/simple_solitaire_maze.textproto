# proto-file: google3/third_party/py/android_env/proto/task.proto
# proto-message: android_env.Task

id: "simple_solitaire_maze"
name: "Simple Solitaire - Maze"
description: "Stacking all the cards as soon as possible."
package_name: "de.tobiasbielefeld.solitaire"
full_activity_name: "de.tobiasbielefeld.solitaire/.ui.GameSelector"

setup_steps: [
  {
    adb_call: {
      install_apk: {
        apk_source: BUILT_INTERNALLY
        mpm: {
          package_name: "learning/deepmind/research/xgames/android/apks/simple_solitaire"
          label: "0.3"
          path: "2020.08.18-simple_solitaire_debug.apk"
        }
      }
    }
    success_condition: {
      check_install: {
        package_name: "de.tobiasbielefeld.solitaire"
        timeout_sec: 10.0
      }
    }
  },
  { adb_call: { rotate: { orientation: PORTRAIT_0 } } }
]

reset_steps: [
  { adb_call: { force_stop: { package_name: "de.tobiasbielefeld.solitaire" } } },
  { adb_call: { clear_cache: { package_name: "de.tobiasbielefeld.solitaire" } } },
  {
    adb_call: {
      start_activity: {
        full_activity: "de.tobiasbielefeld.solitaire/.ui.GameSelector"
        extra_args: [
            "--ez", '"RL_TASK_ENABLED"', '"true"',
            # bmpSampleSize: [0-1]=no effect [2,4,8]=compress, [16+]=unreadable by human eye
            "--es", '"RL_TASK_GAME_CONFIG"', '"{\\"gameIndex\\":9,\\"bmpSampleSize\\":8}"'
        ]
      }
    }
    success_condition: {
      wait_for_app_screen: {
        app_screen: {
          activity: "de.tobiasbielefeld.solitaire/de.tobiasbielefeld.solitaire.ui.GameManager"
          view_hierarchy_path: [
          ]
        }
        timeout_sec: 10.0
      }
      num_retries: 10
    }
  },
  {
    adb_call: {
      start_screen_pinning: {
        full_activity: "de.tobiasbielefeld.solitaire/de.tobiasbielefeld.solitaire.ui.GameManager"
      }
    }
  }
]

expected_app_screen: {
  activity: "de.tobiasbielefeld.solitaire/de.tobiasbielefeld.solitaire.ui.GameManager"
  view_hierarchy_path: [
  ]
}

max_duration_sec: 300  # 5 minutes.

extras_spec: [
  # All of these a returned when a card is moved
  # kind: a=ace, k=king, q=queen, j=jack, x=10, 2-9=digit
  # suit: c=clubs, d=diamonds, h=hearts, s=spades
  # The new visible card [kind, suit]
  { name: "card" shape: [2], dtype: STRING_U1 },
  # 1st tableau stack of cards [kind, suit]
  { name: "stack_0" shape: [52, 2], dtype: STRING_U1 },
  # 2nd tableau stack of cards [kind, suit]
  { name: "stack_1" shape: [52, 2], dtype: STRING_U1 },
  # 3rd tableau stack of cards [kind, suit]
  { name: "stack_2" shape: [52, 2], dtype: STRING_U1 },
  # 4th tableau stack of cards [kind, suit]
  { name: "stack_3" shape: [52, 2], dtype: STRING_U1 },
  # 5th tableau stack of cards [kind, suit]
  { name: "stack_4" shape: [52, 2], dtype: STRING_U1 },
  # 6th tableau stack of cards [kind, suit]
  { name: "stack_5" shape: [52, 2], dtype: STRING_U1 },
  # 7th tableau stack of cards [kind, suit]
  { name: "stack_6" shape: [52, 2], dtype: STRING_U1 },
  # 8h tableau stack of cards [kind, suit]
  { name: "stack_7" shape: [52, 2], dtype: STRING_U1 },
  # 9th tableau stack of cards [kind, suit]
  { name: "stack_8" shape: [52, 2], dtype: STRING_U1 },
  # 10th tableau stack of cards [kind, suit]
  { name: "stack_9" shape: [52, 2], dtype: STRING_U1 },
  # 11th tableau stack of cards [kind, suit]
  { name: "stack_10" shape: [52, 2], dtype: STRING_U1 },
  # 12th tableau stack of cards [kind, suit]
  { name: "stack_11" shape: [52, 2], dtype: STRING_U1 },
  # 13th tableau stack of cards [kind, suit]
  { name: "stack_12" shape: [52, 2], dtype: STRING_U1 },
  # 14th tableau stack of cards [kind, suit]
  { name: "stack_13" shape: [52, 2], dtype: STRING_U1 },
  # 15th tableau stack of cards [kind, suit]
  { name: "stack_14" shape: [52, 2], dtype: STRING_U1 },
  # 16th tableau stack of cards [kind, suit]
  { name: "stack_15" shape: [52, 2], dtype: STRING_U1 },
  # 17th tableau stack of cards [kind, suit]
  { name: "stack_16" shape: [52, 2], dtype: STRING_U1 },
  # 18th tableau stack of cards [kind, suit]
  { name: "stack_17" shape: [52, 2], dtype: STRING_U1 },
  # 19th tableau stack of cards [kind, suit]
  { name: "stack_18" shape: [52, 2], dtype: STRING_U1 },
  # 20th tableau stack of cards [kind, suit]
  { name: "stack_19" shape: [52, 2], dtype: STRING_U1 },
  # 21st tableau stack of cards [kind, suit]
  { name: "stack_20" shape: [52, 2], dtype: STRING_U1 },
  # 22nd tableau stack of cards [kind, suit]
  { name: "stack_21" shape: [52, 2], dtype: STRING_U1 },
  # 23rd tableau stack of cards [kind, suit]
  { name: "stack_22" shape: [52, 2], dtype: STRING_U1 },
  # 24th tableau stack of cards [kind, suit]
  { name: "stack_23" shape: [52, 2], dtype: STRING_U1 },
  # 25th tableau stack of cards [kind, suit]
  { name: "stack_24" shape: [52, 2], dtype: STRING_U1 },
  # 26th tableau stack of cards [kind, suit]
  { name: "stack_25" shape: [52, 2], dtype: STRING_U1 },
  # 27th tableau stack of cards [kind, suit]
  { name: "stack_26" shape: [52, 2], dtype: STRING_U1 },
  # 28th tableau stack of cards [kind, suit]
  { name: "stack_27" shape: [52, 2], dtype: STRING_U1 },
  # 29th tableau stack of cards [kind, suit]
  { name: "stack_28" shape: [52, 2], dtype: STRING_U1 },
  # 30th tableau stack of cards [kind, suit]
  { name: "stack_29" shape: [52, 2], dtype: STRING_U1 },
  # 31th tableau stack of cards [kind, suit]
  { name: "stack_30" shape: [52, 2], dtype: STRING_U1 },
  # 32nd tableau stack of cards [kind, suit]
  { name: "stack_31" shape: [52, 2], dtype: STRING_U1 },
  # 33rd tableau stack of cards [kind, suit]
  { name: "stack_32" shape: [52, 2], dtype: STRING_U1 },
  # 34th tableau stack of cards [kind, suit]
  { name: "stack_33" shape: [52, 2], dtype: STRING_U1 },
  # 35th tableau stack of cards [kind, suit]
  { name: "stack_34" shape: [52, 2], dtype: STRING_U1 },
  # 36th tableau stack of cards [kind, suit]
  { name: "stack_35" shape: [52, 2], dtype: STRING_U1 },
  # 37th tableau stack of cards [kind, suit]
  { name: "stack_36" shape: [52, 2], dtype: STRING_U1 },
  # 38th tableau stack of cards [kind, suit]
  { name: "stack_37" shape: [52, 2], dtype: STRING_U1 },
  # 39th tableau stack of cards [kind, suit]
  { name: "stack_38" shape: [52, 2], dtype: STRING_U1 },
  # 40th tableau stack of cards [kind, suit]
  { name: "stack_39" shape: [52, 2], dtype: STRING_U1 },
  # 41st tableau stack of cards [kind, suit]
  { name: "stack_40" shape: [52, 2], dtype: STRING_U1 },
  # 42nd tableau stack of cards [kind, suit]
  { name: "stack_41" shape: [52, 2], dtype: STRING_U1 },
  # 43rd tableau stack of cards [kind, suit]
  { name: "stack_42" shape: [52, 2], dtype: STRING_U1 },
  # 44th tableau stack of cards [kind, suit]
  { name: "stack_43" shape: [52, 2], dtype: STRING_U1 },
  # 45th tableau stack of cards [kind, suit]
  { name: "stack_44" shape: [52, 2], dtype: STRING_U1 },
  # 46th tableau stack of cards [kind, suit]
  { name: "stack_45" shape: [52, 2], dtype: STRING_U1 },
  # 47th tableau stack of cards [kind, suit]
  { name: "stack_46" shape: [52, 2], dtype: STRING_U1 },
  # 48th tableau stack of cards [kind, suit]
  { name: "stack_47" shape: [52, 2], dtype: STRING_U1 },
  # 49th tableau stack of cards [kind, suit]
  { name: "stack_48" shape: [52, 2], dtype: STRING_U1 },
  # 50th tableau stack of cards [kind, suit]
  { name: "stack_49" shape: [52, 2], dtype: STRING_U1 },
  # 51st tableau stack of cards [kind, suit]
  { name: "stack_50" shape: [52, 2], dtype: STRING_U1 },
  # 52nd tableau stack of cards [kind, suit]
  { name: "stack_51" shape: [52, 2], dtype: STRING_U1 },
  # 53rd tableau stack of cards [kind, suit]
  { name: "stack_52" shape: [52, 2], dtype: STRING_U1 },
  # Discard stack of cards [kind, suit]
  { name: "stack_53" shape: [52, 2], dtype: STRING_U1 }
]
